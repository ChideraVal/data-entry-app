<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Email Monitor Dashboard â€” Mockup</title>

  <!-- Google font (optional, lightweight) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #f6f8fb;
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #2563eb;
      --accent-2: #06b6d4;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --glass: rgba(255, 255, 255, 0.6);
      --shadow-sm: 0 6px 18px rgba(16, 24, 40, 0.06);
      --shadow-md: 0 10px 30px rgba(16, 24, 40, 0.08);
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      background: linear-gradient(180deg, #fbfdff 0%, var(--bg) 100%);
      color: #0f172a;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      padding: 28px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      gap: 20px;
      grid-template-columns: 1fr;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 6px;
    }

    .brand {
      display: flex;
      gap: 14px;
      align-items: center;
    }

    .logo {
      width: 54px;
      height: 54px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 800;
      font-size: 18px;
    }

    h1 {
      margin: 0;
      font-size: 20px
    }

    .subtitle {
      color: var(--muted);
      font-size: 13px
    }

    .actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .btn {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      border: 0;
      padding: 10px 14px;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: var(--shadow-sm);
      transition: transform .12s ease, box-shadow .12s ease;
      background: var(--card);
    }

    .btn:hover {
      transform: translateY(-3px)
    }

    .btn-primary {
      background: linear-gradient(90deg, var(--accent), #3b82f6);
      color: white;
      box-shadow: 0 8px 30px rgba(59, 130, 246, 0.18);
    }

    .btn-ghost {
      background: transparent;
      color: var(--muted);
    }

    .btn[disabled] {
      opacity: .55;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    input[type=file] {
      display: none
    }

    /* Metrics row */
    .metrics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 18px;
    }

    .metric {
      background: var(--card);
      border-radius: 12px;
      padding: 18px;
      box-shadow: var(--shadow-md);
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .metric .icon {
      width: 56px;
      height: 56px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
      box-shadow: var(--shadow-sm);
    }

    .m-title {
      font-size: 13px;
      color: var(--muted)
    }

    .m-value {
      font-size: 20px;
      font-weight: 700;
      margin-top: 6px
    }

    .progress {
      width: 100%;
      height: 10px;
      background: #eef2ff;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress>i {
      display: block;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, #7c3aed, #60a5fa);
      width: 0%;
      transition: width .6s cubic-bezier(.2, .9, .3, 1);
    }

    /* Main content */
    .main {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 20px;
      margin-top: 6px;
    }

    /* Queue card */
    .card {
      background: var(--card);
      border-radius: 14px;
      padding: 18px;
      box-shadow: var(--shadow-md);
    }

    .card h2 {
      margin: 0 0 12px 0;
      font-size: 16px
    }

    .toolbar {
      display: flex;
      gap: 8px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .filters {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .filter-btn {
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid transparent;
      background: transparent;
      cursor: pointer;
      font-weight: 600;
    }

    .filter-btn.active {
      background: #f3f6ff;
      border-color: #e6edff;
      color: var(--accent);
      box-shadow: 0 6px 16px rgba(37, 99, 235, 0.06);
    }

    .search {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .search input {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #e6edf7;
      outline: none;
      width: 240px;
      font-size: 14px;
    }

    /* Queue list */
    .list {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .row {
      display: grid;
      grid-template-columns: 40px 1fr 190px 120px;
      gap: 12px;
      align-items: center;
      padding: 12px;
      border-radius: 10px;
      transition: background .12s ease, transform .08s ease;
    }

    .row:hover {
      transform: translateY(-3px);
      background: #fbfdff
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: grid;
      place-items: center;
      color: white;
      font-weight: 700;
      box-shadow: var(--shadow-sm)
    }

    .col-subject {
      display: flex;
      flex-direction: column
    }

    .subject {
      font-weight: 700
    }

    .meta {
      font-size: 13px;
      color: var(--muted)
    }

    .col-actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      align-items: center
    }

    .icon-btn {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: 0;
      background: #f6f7fb;
      display: grid;
      place-items: center;
      cursor: pointer;
      transition: transform .1s ease;
    }

    .icon-btn:hover {
      transform: translateY(-3px)
    }

    .tag {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      padding: 6px 8px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 13px
    }

    .tag.failed {
      background: #fff1f0;
      color: var(--danger);
      border: 1px solid rgba(239, 68, 68, 0.06)
    }

    .tag.pending {
      background: #fff7ed;
      color: var(--warning);
      border: 1px solid rgba(245, 158, 11, 0.06)
    }

    .tag.success {
      background: #ecfdf5;
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.06)
    }

    /* Sidebar */
    .sidebar .small {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .stat {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      padding: 12px;
      border-radius: 10px;
      background: #fbfdff;
      border: 1px solid #f0f6ff;
      margin-bottom: 10px;
    }

    /* toast */
    .toast {
      position: fixed;
      right: 28px;
      bottom: 28px;
      background: linear-gradient(90deg, #111827, #0f172a);
      color: white;
      padding: 12px 16px;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(2, 6, 23, 0.5);
      transform: translateY(20px);
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease, transform .3s cubic-bezier(.2, .9, .3, 1);
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto
    }

    /* responsive */
    @media (max-width: 980px) {
      .main {
        grid-template-columns: 1fr
      }

      .metrics {
        grid-template-columns: 1fr
      }

      .search input {
        width: 160px
      }

      .row {
        grid-template-columns: 40px 1fr 140px 100px;
      }
    }
  </style>
</head>

<body>
  <div class="container" role="main">
    <header>
      <div class="brand">
        <div class="logo">EM</div>
        <div>
          <h1>Email Monitor</h1>
          <div class="subtitle">Monitoring & extraction â€¢ Dashboard</div>
        </div>
      </div>

      <div class="actions">
        <label class="btn" title="Upload files">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden>
            <path d="M12 3v12" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="#0f172a" stroke-width="1.6"
              stroke-linecap="round" stroke-linejoin="round" />
            <path d="M7 11l5-6 5 6" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          <span style="opacity:.95">Upload Files</span>
          <input id="fileUpload" type="file" multiple />
        </label>

        <button id="scanBtn" class="btn btn-primary" title="Scan inbox & process with AI">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden>
            <path d="M3 12h4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M7 12a5 5 0 0 1 10 0" stroke="white" stroke-width="1.8" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M21 12h-2" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          Scan Email Inbox
        </button>
      </div>
    </header>

    <!-- Metrics -->
    <section class="metrics" aria-label="Key metrics">
      <div class="metric card">
        <div class="icon" style="background:linear-gradient(135deg,#7c3aed,#60a5fa)">D</div>
        <div style="flex:1">
          <div class="m-title">Documents processed this month</div>
          <div class="m-value" id="docsValue">145 / 500</div>
          <div class="progress" aria-hidden><i id="docsProgress" style="width:0%"></i></div>
        </div>
      </div>

      <div class="metric card">
        <div class="icon" style="background:linear-gradient(135deg,#06b6d4,#0891b2)">E</div>
        <div style="flex:1">
          <div class="m-title">Emails fetched & processed</div>
          <div class="m-value" id="emailsValue">23 / 100</div>
          <div class="progress" aria-hidden><i id="emailsProgress" style="width:0%"></i></div>
        </div>
      </div>

      <div class="metric card">
        <div class="icon" style="background:linear-gradient(135deg,#16a34a,#34d399)">O</div>
        <div style="flex:1">
          <div class="m-title">Orders approved (parsed data)</div>
          <div class="m-value" id="ordersValue">40 / 78</div>
          <div class="progress" aria-hidden><i id="ordersProgress" style="width:0%"></i></div>
        </div>
      </div>
    </section>

    <!-- Main -->
    <section class="main">
      <!-- Queue / List -->
      <div class="card">
        <!-- Title line moved above toolbar -->
        <h2>Queue â€” Recent fetched emails</h2>
        <div class="subtitle" style="margin-top:6px; margin-bottom:12px;">Shows the most recent emails fetched and their
          extraction status.</div>

        <div class="toolbar">
          <div></div> <!-- spacer so filters/search sit on the right as before -->

          <div style="display:flex;gap:12px;align-items:center;">
            <div class="filters" role="tablist" aria-label="Status filters">
              <button class="filter-btn active" data-filter="all">All</button>
              <button class="filter-btn" data-filter="failed">ðŸ”´ Failed</button>
              <button class="filter-btn" data-filter="pending">ðŸŸ¡ Pending</button>
              <button class="filter-btn" data-filter="success">ðŸŸ¢ Successful</button>
            </div>

            <div class="search">
              <input id="search" placeholder="Search subject, from, date..." aria-label="Search emails" />
              <button id="refreshBtn" class="btn btn-ghost" title="Refresh (UI)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden>
                  <path d="M20 7v6h-6" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round"
                    stroke-linejoin="round" />
                  <path d="M4 17a8 8 0 1 0 4-7.1" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="list" id="queueList" aria-live="polite">
          <!-- rows inserted by JS -->
        </div>
      </div>

      <!-- Sidebar -->
      <aside class="sidebar card">
        <h3 style="margin-top:0">Summary</h3>
        <div class="small">Quick stats and helpful tips</div>

        <div class="stat">
          <div>Pending</div>
          <div id="countPending">0</div>
        </div>
        <div class="stat">
          <div>Failed</div>
          <div id="countFailed">0</div>
        </div>
        <div class="stat">
          <div>Successful</div>
          <div id="countSuccess">0</div>
        </div>

        <div style="margin-top:18px">
          <h4 style="margin:0 0 8px 0">Notes</h4>
          <div class="small">â€¢ Files larger than your configured limit will be skipped. <br>â€¢ Use "Scan Email Inbox" to
            fetch & process automatically</div>
        </div>

        <div style="margin-top:18px">
          <button id="bulkReprocessBtn" class="btn" style="width:100%">Reprocess all failed</button>
        </div>
      </aside>
    </section>

  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // Sample data to populate the queue
    const sampleEmails = [
      { id: 1, subject: "Order #A12345 - Payment Received", from: "orders@shop.com", date: "2025-12-09 14:23", status: "success", sizeKb: 78 },
      { id: 2, subject: "Invoice for your recent purchase", from: "billing@vendor.co", date: "2025-12-09 11:02", status: "failed", sizeKb: 512 },
      { id: 3, subject: "New order: 2 items", from: "sales@store.io", date: "2025-12-08 19:05", status: "pending", sizeKb: 1240 },
      { id: 4, subject: "Ship notice for #B9987", from: "logistics@shop.com", date: "2025-12-07 09:14", status: "success", sizeKb: 85 },
      { id: 5, subject: "Purchase confirmation", from: "no-reply@market.org", date: "2025-12-06 16:50", status: "failed", sizeKb: 4200 },
      { id: 6, subject: "Your refund has been processed", from: "support@store.io", date: "2025-12-05 13:11", status: "success", sizeKb: 64 },
      { id: 7, subject: "Order #C332 - needs review", from: "orders@shop.com", date: "2025-12-04 08:33", status: "pending", sizeKb: 210 },
    ];

    // UI references
    const queueEl = document.getElementById('queueList');
    const filters = Array.from(document.querySelectorAll('.filter-btn'));
    const searchInput = document.getElementById('search');
    const toast = document.getElementById('toast');
    const countPending = document.getElementById('countPending');
    const countFailed = document.getElementById('countFailed');
    const countSuccess = document.getElementById('countSuccess');
    const docsProgress = document.getElementById('docsProgress');
    const emailsProgress = document.getElementById('emailsProgress');
    const ordersProgress = document.getElementById('ordersProgress');
    const docsValue = document.getElementById('docsValue');
    const emailsValue = document.getElementById('emailsValue');
    const ordersValue = document.getElementById('ordersValue');
    const bulkReprocessBtn = document.getElementById('bulkReprocessBtn');

    // Metrics values (example)
    const metrics = {
      docs: { value: 145, limit: 500 },
      emails: { value: 23, limit: 100 },
      orders: { value: 40, limit: 78 }
    };

    // Setup metrics progress
    function renderMetrics() {
      const dPct = Math.round((metrics.docs.value / metrics.docs.limit) * 100);
      const ePct = Math.round((metrics.emails.value / metrics.emails.limit) * 100);
      const oPct = Math.round((metrics.orders.value / metrics.orders.limit) * 100);
      docsProgress.style.width = dPct + '%';
      emailsProgress.style.width = ePct + '%';
      ordersProgress.style.width = oPct + '%';
      docsValue.textContent = `${metrics.docs.value} / ${metrics.docs.limit}`;
      emailsValue.textContent = `${metrics.emails.value} / ${metrics.emails.limit}`;
      ordersValue.textContent = `${metrics.orders.value} / ${metrics.orders.limit}`;
    }

    // Utility: show toast
    let toastTimer = null;
    function showToast(msg) {
      clearTimeout(toastTimer);
      toast.textContent = msg;
      toast.classList.add('show');
      toastTimer = setTimeout(() => toast.classList.remove('show'), 2800);
    }

    // Render single row
    function renderRow(email) {
      const row = document.createElement('div');
      row.className = 'row';
      row.dataset.id = email.id;
      // avatar color by status
      const colorBy = {
        success: 'linear-gradient(135deg,#10b981,#34d399)',
        failed: 'linear-gradient(135deg,#ef4444,#fb7185)',
        pending: 'linear-gradient(135deg,#f59e0b,#f97316)'
      };
      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.style.background = colorBy[email.status] || '#94a3b8';
      avatar.textContent = email.from.split('@')[0][0].toUpperCase();

      const subj = document.createElement('div');
      subj.className = 'col-subject';
      subj.innerHTML = `<div class="subject">${escapeHtml(email.subject)}</div>
                        <div class="meta">${escapeHtml(email.from)} â€¢ ${escapeHtml(email.date)} â€¢ ${email.sizeKb} KB</div>`;

      const statusWrap = document.createElement('div');
      statusWrap.style.display = 'flex';
      statusWrap.style.justifyContent = 'flex-end';
      statusWrap.style.gap = '8px';
      const tag = document.createElement('div');
      // Removed colored circles / emojis â€” plain text only as requested
      tag.className = 'tag ' + (email.status === 'failed' ? 'failed' : email.status === 'pending' ? 'pending' : 'success');
      tag.textContent = email.status === 'failed' ? 'Failed' : email.status === 'pending' ? 'Pending' : 'Successful';
      statusWrap.appendChild(tag);

      // actions
      const actions = document.createElement('div');
      actions.className = 'col-actions';

      const btnReproc = document.createElement('button');
      btnReproc.className = 'icon-btn';
      btnReproc.title = 'Reprocess with AI';
      btnReproc.innerHTML = `
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M21 12a9 9 0 1 0-3.44 6.72" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M21 12v-5" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M21 7l-4 4" stroke="#111827" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
      btnReproc.addEventListener('click', () => onReprocess(email.id));

      const btnDelete = document.createElement('button');
      btnDelete.className = 'icon-btn';
      btnDelete.title = 'Delete email';
      btnDelete.innerHTML = `
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M3 6h18" stroke="#111827" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6" stroke="#111827" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 11v6" stroke="#111827" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M14 11v6" stroke="#111827" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
      btnDelete.addEventListener('click', () => onDelete(email.id));

      actions.appendChild(btnReproc);
      actions.appendChild(btnDelete);

      // assemble
      row.appendChild(avatar);
      row.appendChild(subj);
      row.appendChild(statusWrap);
      row.appendChild(actions);

      return row;
    }

    // Basic HTML escape
    function escapeHtml(s) {
      return String(s).replace(/[&<>"']/g, function (m) { return ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' })[m]; });
    }

    // Render list with optional filter/search
    function renderList(filter = 'all', q = '') {
      queueEl.innerHTML = '';
      const filtered = sampleEmails.filter(e => {
        if (filter !== 'all' && e.status !== filter) return false;
        if (!q) return true;
        const norm = q.toLowerCase();
        return (e.subject + ' ' + e.from + ' ' + e.date).toLowerCase().includes(norm);
      });
      if (filtered.length === 0) {
        const empty = document.createElement('div');
        empty.style.padding = '28px';
        empty.style.textAlign = 'center';
        empty.style.color = 'var(--muted)';
        empty.textContent = 'No emails match this filter/search.';
        queueEl.appendChild(empty);
        updateCounts();
        return;
      }
      filtered.forEach(e => queueEl.appendChild(renderRow(e)));
      updateCounts();
    }

    function updateCounts() {
      const pending = sampleEmails.filter(s => s.status === 'pending').length;
      const failed = sampleEmails.filter(s => s.status === 'failed').length;
      const success = sampleEmails.filter(s => s.status === 'success').length;
      countPending.textContent = pending;
      countFailed.textContent = failed;
      countSuccess.textContent = success;

      // Disable bulk reprocess button if there are no failed items
      if (failed === 0) {
        bulkReprocessBtn.setAttribute('disabled', 'disabled');
      } else {
        bulkReprocessBtn.removeAttribute('disabled');
      }
    }

    // Events
    let activeFilter = 'all';
    filters.forEach(btn => {
      btn.addEventListener('click', () => {
        filters.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        activeFilter = btn.dataset.filter;
        renderList(activeFilter, searchInput.value.trim());
      });
    });

    searchInput.addEventListener('input', () => {
      renderList(activeFilter, searchInput.value.trim());
    });

    document.getElementById('refreshBtn').addEventListener('click', () => {
      showToast('Refreshed (mock UI)');
      renderList(activeFilter, searchInput.value.trim());
    });

    // Delete handler (client-side only)
    function onDelete(id) {
      const idx = sampleEmails.findIndex(s => s.id === id);
      if (idx === -1) return;
      // simple UI confirm
      if (!confirm('Delete this email from queue?')) return;
      sampleEmails.splice(idx, 1);
      renderList(activeFilter, searchInput.value.trim());
      showToast('Email deleted');
    }

    // Reprocess handler (simulate sending to AI -> set status pending then success after delay)
    function onReprocess(id) {
      const item = sampleEmails.find(s => s.id === id);
      if (!item) return;
      item.status = 'pending';
      renderList(activeFilter, searchInput.value.trim());
      showToast('Reprocessing with AI...');
      // simulate processing (random success/fail)
      setTimeout(() => {
        const ok = Math.random() > 0.28;
        item.status = ok ? 'success' : 'failed';
        renderList(activeFilter, searchInput.value.trim());
        showToast(ok ? 'Reprocess successful' : 'Reprocess failed');
      }, 1200 + Math.random() * 1400);
    }

    // Bulk reprocess failed
    bulkReprocessBtn.addEventListener('click', () => {
      const failedItems = sampleEmails.filter(s => s.status === 'failed');
      if (failedItems.length === 0) { showToast('No failed items to reprocess'); return; }
      if (!confirm(`Reprocess ${failedItems.length} failed email(s)?`)) return;
      failedItems.forEach(it => { it.status = 'pending'; });
      renderList(activeFilter, searchInput.value.trim());
      showToast('Reprocessing failed items...');
      // simulate all becoming success after a moment
      setTimeout(() => {
        failedItems.forEach(it => it.status = 'success');
        renderList(activeFilter, searchInput.value.trim());
        showToast('Bulk reprocess finished');
      }, 1400 + Math.random() * 1200);
    });

    // Scan inbox (simulate fetching new email(s))
    document.getElementById('scanBtn').addEventListener('click', () => {
      // simulate adding a new item
      const id = Math.max(...sampleEmails.map(s => s.id)) + 1;
      const now = new Date();
      const newItem = {
        id,
        subject: "New order from inbox â€” simulated",
        from: "inbox@auto.fetch",
        date: now.toISOString().slice(0, 16).replace('T', ' '),
        status: 'pending',
        sizeKb: 150
      };
      sampleEmails.unshift(newItem);
      // increment metrics slightly
      metrics.emails.value = Math.min(metrics.emails.limit, metrics.emails.value + 1);
      metrics.docs.value = Math.min(metrics.docs.limit, metrics.docs.value + 1);
      renderMetrics();
      renderList(activeFilter, searchInput.value.trim());
      showToast('Inbox scanned â€” new email queued (mock)');
    });

    // Upload files (file input)
    document.getElementById('fileUpload').addEventListener('change', (ev) => {
      const files = Array.from(ev.target.files);
      if (files.length === 0) return;
      // Mock: add one row per file
      files.forEach((f, i) => {
        const id = Math.max(...sampleEmails.map(s => s.id)) + i + 1;
        sampleEmails.unshift({
          id,
          subject: `[Uploaded] ${f.name}`,
          from: "manual.upload",
          date: new Date().toISOString().slice(0, 16).replace('T', ' '),
          status: 'pending',
          sizeKb: Math.round(f.size / 1024)
        });
      });
      // bump metrics
      metrics.docs.value = Math.min(metrics.docs.limit, metrics.docs.value + files.length);
      renderMetrics();
      renderList(activeFilter, searchInput.value.trim());
      showToast(files.length + ' file(s) uploaded (mock)');
      // clear value so same file can be uploaded again
      ev.target.value = '';
    });

    // Initialize
    renderMetrics();
    renderList();
  </script>
</body>

</html>